<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>OBURUS â€“ Personalized Recommender</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 40px auto;
    }
    input, button {
      padding: 8px;
      margin: 6px 0;
      width: 100%;
    }
    .card {
      border: 1px solid #ddd;
      padding: 12px;
      margin-top: 10px;
      border-radius: 6px;
    }
  </style>
</head>
<body>

<h2>ğŸ½ï¸ OBURUS â€“ Personalized Restaurant Recommender</h2>

<label>Latitude</label>
<input id="lat" placeholder="41.04">

<label>Longitude</label>
<input id="lng" placeholder="29.02">

<label>Ne istiyorsun? (Ã¶rn: coffee,dessert)</label>
<input id="prefs" placeholder="coffee,dessert">

<label>YarÄ±Ã§ap (km)</label>
<input id="radius" value="5">

<button onclick="search()">Ã–nerileri Getir</button>

<hr>

<div id="results"></div>

<script>
async function search() {
  const lat = document.getElementById("lat").value;
  const lng = document.getElementById("lng").value;
  const prefs = document.getElementById("prefs").value;
  const radius = document.getElementById("radius").value;

  const url = `/rank?lat=${lat}&lng=${lng}&prefs=${prefs}&radius_km=${radius}`;

  const res = await fetch(url);
  const data = await res.json();

  const container = document.getElementById("results");
  container.innerHTML = "";

  data.items.forEach(item => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `
      <strong>${item.name}</strong><br>
      â­ Score: ${item.score}<br>
      ğŸ“ ${item.km.toFixed(2)} km<br>
      ğŸ´ Categories: ${item.categories}<br>
      â¤ï¸ Matched: ${item.matched_prefs.join(", ")}
    `;
    container.appendChild(div);
  });
}
</script>

</body>
</html>
